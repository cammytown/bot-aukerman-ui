{% extends "perform/base.html" %}

{% block title %}Performance{% endblock %}

{% block content_class %}performance{% endblock %}

{% block content %}
	<h2>{{ performance.title }}</h2>

	<div id="performance-controls">
		<button
			id="start-performance"
			hx-post="{% url 'start_performance' performance.id %}"
			hx-target="#performance-script-text"
		>
			Start Performance
		</button>

		<button
			id="stop-performance"
			hx-post="{% url 'stop_performance' performance.id %}"
		>
			Stop Performance
		</button>

		<button
			id="generate-dialogue"
			hx-post="{% url 'generate_dialogue' performance.id %}"
		>
			Generate Dialogue
		</button>
	</div>

	<div id="performance-status">
		<h3>Performance Status</h3>

		<a
			class="btn btn-primary"
			id="toggle-microphone"
			hx-post="{% url 'toggle_microphone' %}"
			hx-target="#microphone-status"
			hx-swap="innerHTML"
		>
			Toggle Microphone Listen
		</a>
		<span id="microphone-status">Off</span>

		<div id="performance-status-text">
			{{ performance_status_text }}
		</div>
	</div>

	<div id="performance-logs">
		<h3>Performance Logs</h3>

		<div id="performance-logs-text">
			{{ performance_logs_text }}
		</div>
	</div>

	<div id="performance-script">
		<h3>Performance Script</h3>

		<div id="performance-script-text">
			{{ performance.script|linebreaksbr }}
		</div>
{% endblock %}

<div id="hotkeys">
	<ul>
		<li>
			<kbd>Ctrl</kbd> + <kbd>Enter</kbd> - Start Performance
		</li>

		<li>
			<kbd>Ctrl</kbd> + <kbd>Space</kbd> - Toggle Microphone Listen
		</li>
</div>
